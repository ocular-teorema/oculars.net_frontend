<section class="container cameras">
  <h1 class="title">
    Подключение услуг
  </h1>
  <div class="row">
    <div class="block block--table">
      <div class="row id-input">
        <div class="id">{{isHashAvailable ? 'Ваш' : 'Введите'}} id</div>
        <input [(ngModel)]="userModel.hardware_hash"
        [disabled]='isHashAvailable' type="text">
        <button *ngIf="!isHashAvailable"
        (click)="saveId()" class="button button--full">
          сохранить
        </button>
      </div>
      <div *ngIf="userModel.offline_code">
        <table>
          <thead>
            <td>тип</td>
            <td>оплачено</td>
            <td>добавить</td>
            <td>цена за камеру</td>
            <td>Всего</td>
          </thead>
          <tbody>
            <tr>
              <td>Хранение</td>
              <td>{{userModel.cam_list.s}}</td>
              <td>
                <div class="counter">
                  <button [disabled]="!camList.s"
                  (click)="removeCamera('s')"
                  class="button button--minus">–</button>
                  <input [(ngModel)]="camList.s"
                  type="text" [textMask]="maskData">
                  <button (click)="addCamera('s')"
                  [disabled]="camList.s > 98"
                  class="button button--plus">+</button>
                </div>
              </td>
              <td>2500 Р</td>
              <td>
                <b>{{camList.s * 2500}} Р</b>
              </td>
            </tr>
            <tr>
              <td>Аналитика</td>
              <td>{{userModel.cam_list.a}}</td>
              <td>
                <div class="counter">
                  <button [disabled]="camList.a === 0"
                  (click)="removeCamera('a')"
                  class="button button--minus">–</button>
                  <input [(ngModel)]="camList.a"
                  type="text" [textMask]="maskData">
                  <button (click)="addCamera('a')"
                  [disabled]="camList.a > 98"
                  class="button button--plus">+</button>
                </div>
              </td>
              <td>4500 Р</td>
              <td>
                <b>{{camList.a * 4500}} Р</b>
              </td>
            </tr>
            <tr>
              <td>Полный анализ</td>
              <td>{{userModel.cam_list.f}}</td>
              <td>
                <div class="counter">
                  <button [disabled]="camList.f === 0"
                  (click)="removeCamera('f')"
                  class="button button--minus">–</button>
                  <input [(ngModel)]="camList.f"
                  type="number" [textMask]="maskData">
                  <button (click)="addCamera('f')"
                  [disabled]="camList.f > 98"
                  class="button button--plus">+</button>
                </div>
              </td>
              <td>7000 Р</td>
              <td>
                <b>{{camList.f * 7000}} Р</b>
              </td>
            </tr>
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td class="summary">
                <div class="summary__title">
                  итого
                </div>
                <div class="summary__number">
                  {{camList.s * 2500 + camList.a * 4500 + camList.f * 7000}} Р
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="row row--right">
          <button [disabled]="!isHashAvailable || ((camList.f + camList.a + camList.s) === 0)"
          (click)="saveCameras()" class="button button--full">пополнить счет</button>
        </div>
        <div class="row">
          <app-transactions [isSuperuser]='userModel.is_superuser'></app-transactions>
        </div>
      </div>
    </div>
    <div *ngIf="userModel.offline_code" class="block block--internet internet">
      <div class="internet__title">
        Оффлайн хэш
      </div>
      <div class="internet__text">
        <div class="hash">{{userModel.offline_code}}</div>
      </div>
    </div>
  </div>
</section>